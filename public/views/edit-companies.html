<style>
  .action-buttons {
    margin-top: 10px;
  }
  .crop-area {
    background: #E4E4E4;
    overflow: hidden;
    width: 100%;
    height: 180px;
  }
  .dragover {
    border: 5px dashed #233845;
  }
</style>
<div class="bg-light lter b-b wrapper-md">
  <h1 class="m-n font-thin h3" ng-if="!formCompany._id"><i class="icon-diamond"></i> Crear Empresa</h1>
  <h1 class="m-n font-thin h3" ng-if="formCompany._id">Editar Empresa </h1>
</div>

<div class="wrapper-md">

  <div class="row">

    <!-- LOGO -->
    <div class="col-sm-3">
      <div class="b-a b-2x b-dashed wrapper-lg bg-white text-center m-b"
      
        ngf-drop ngf-select ng-model="picFile" 
        ngf-drag-over-class="'dragover'" ngf-multiple="false"
        accept="image/*" 
        ngf-pattern="'image/*'"
      
      >
          <!-- Arrastra el Logo aquí. | Vista Previa -->
          <img ng-src="{{picFile ? croppedDataUrl : formCompany.logo}}" />
          <div ng-style="{display: !formCompany.logo && !picFile ? '' : 'none'}">
              Arrastra la Foto aquí.
          </div>
      </div>
        
      <div ng-style="{display: picFile ? '' : 'none'}">
        
        <div class="crop-area">
          <img-crop image="picFile | ngfDataUrl" result-image="croppedDataUrl"></img-crop>
        </div>
        
      </div>
      
      <!-- Si el Drag n Drop no es soportado, permito seleccionar la imagen -->
      <div ngf-no-file-drop>
        <div ng-style="{display: !picFile ? '' : 'none'}" class="button" ngf-select ng-model="picFile" ngf-multiple="false">Cambiar Imagen</div>  
      </div>
      
      <div class="action-buttons" ng-style="{display: picFile ? '' : 'none'}">
        <button class="btn btn-default btn-block" ng-click="picFile = ''; croppedDataUrl = '';">Cancelar</button> 
        <button class="btn btn-primary btn-block" ng-click="upload(croppedDataUrl)">Subir</button>
      </div>
    
    </div>
    
    <!-- FORMULARIO -->
    <div class="col-sm-9">
      <div class="panel panel-default">
        <div class="panel-heading font-bold" ng-if="!formCompany._id">
            Crear Empresa
        </div>
        <div class="panel-heading font-bold" ng-if="formCompany._id">
            Editar Empresa
        </div>
        <div class="panel-body">

          <form name="form" ng-submit="save()" class="form-validation form-horizontal ng-pristine ng-valid ng-valid-date ng-valid-required ng-valid-date-disabled">

            <div class="form-group">
              <label class="col-sm-3 control-label" for="username">Empresa</label>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="username" placeholder="Ingrese el nombre de la empresa"  ng-model='formCompany.name' required />
              </div>
            </div>


            <div class="form-group">
              <label class="col-sm-3 control-label">Correo Electrónico</label>
              <div class="col-sm-9">
                <input class="form-control" type="email" name="email"  ng-model='formCompany.email' placeholder="Ingrese el correo electrónico principal de la empresa" required />
              </div>
            </div>


            <div class="line line-dashed b-b line-lg pull-in"></div>

            <div class="form-group">
              <label class="col-sm-3 control-label">URL</label>
              <div class="col-sm-8">
                <input class="form-control" type="text" placeholder="http://system.fosteringtalen.com/{{formCompany.name|encodeUri}}" ng-model='formCompany.url' disabled/>  
              </div>
              <div class="col-sm-1">
                <a href="" class="btn pull-in btn-xs btn-icon btn-default"><i class="fa fa-files-o"></i></a>
              </div>
            </div>


            


            <div class="line line-dashed b-b line-lg pull-in"></div>
            

            <div class="form-group">
              <label for="assessments" class="col-sm-3 control-label">Herramientas Habilitados</label>
              <div class="col-sm-9">
                

                <!-- CLIMA LABORAL -->
                <div class="clearfix">
                  <div class="col-sm-5 pull-in">
                    <div class="checkbox">
                      <label class="i-checks"><input type="checkbox" checked="" value=""><i></i>Clima Laboral</label>
                    </div>
                  </div>

                  <div class="col-sm-7">
                    <div class="col-sm-2">
                      <i class="fa icon-users control-label"></i>
                    </div>
                    <div class="col-sm-9">
                      <input type="number" class="form-control ng-pristine ng-invalid ng-invalid-validator ng-invalid-required ng-touched input-sm" placeholder="N&deg; de Participantes, m&iacute;n. 20" ui-validate=" '$value >= 20' " required="" tabindex="0" aria-required="true" aria-invalid="true" ng-model='formCompany.maxUsers' />
                    </div>
                  </div>
                </div>

                <!-- FELICÍMETRO -->
                <div class="clearfix">
                  <div class="col-sm-5 pull-in">
                    <div class="checkbox">
                      <label class="i-checks text-muted"><input type="checkbox" disabled="" value=""><i></i>Bienestar Organizacional</label>
                    </div>
                  </div>

                  <div class="col-sm-7">
                    <div class="col-sm-2">
                      <i class="fa icon-users control-label text-muted"></i>
                    </div>
                    <div class="col-sm-9">
                      <input type="number" disabled="" class="form-control ng-pristine ng-invalid ng-invalid-validator ng-invalid-required ng-touched input-sm" placeholder="Nº de Participantes, mín. 20" ui-validate=" '$value >= 20' " required="" tabindex="0" aria-required="true" aria-invalid="true">
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <div class="line line-dashed b-b line-lg pull-in"></div>


            <!-- SI LA EMPRESA ESTÁ EN ESTADO DEMO -->
            <div class="form-group">
              <div class="col-sm-9 col-sm-offset-3">
                <label>
                <input type="checkbox" value="" checked="" ng-model='formCompany.demo' id="demo"/> 
                DEMO (?)
              </label>
              </div>
            </div>

            <div class="line line-dashed b-b line-lg pull-in"></div>

            <!-- USUARIO ADMINISTRADOR PARA LA EMPRESA -->
            <div class="form-group">
              <label class="col-sm-3 control-label" for="admin">Usuario Administrador</label>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="admin" placeholder="Ingrese el nombre del administrador" ng-model='formUser.username'/>
              </div>
            </div>

            <div class="form-group">
              <label class="col-sm-3 control-label" for="username">Password</label>
              <div class="col-sm-9">
                <input class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched" type="password" name="password" placeholder="Ingrese el password del administrador" tabindex="0" aria-required="true" aria-invalid="true" ng-model='formUser.password'/>
              </div>
            </div>

            <div class="line line-dashed b-b line-lg pull-in"></div>
            
            <div class="form-group">
              <label class="col-sm-3 control-label" for="name">Nombre</label>
              <div class="col-sm-9">
                <input class="form-control" type="text" name="name" placeholder="Ingrese el nombre de la persona" ng-model="formUser.name" />
              </div>
            </div>



            <div class="form-group">
              <label class="col-sm-3 control-label" for="lastname">Apellido</label>
              <div class="col-sm-9">
                <input class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched" type="text" name="lastname" placeholder="Ingrese el apellido de la persona" ng-model="formUser.lastname" tabindex="0" aria-required="true" aria-invalid="true" />
              </div>
            </div>


            <div class="line line-dashed b-b line-lg pull-in"></div>

            <!-- ESTO HAY QUE HACERLO ANDAR! 
            <div class="form-group">
              <label class="col-sm-3 control-label" for="username">Confirmar</label>
              <div class="col-sm-9">
                <input type="password" class="form-control ng-pristine ng-untouched ng-valid-validator ng-invalid ng-invalid-required" name="confirm_password" placeholder="Ingrese nuevamente el password" required="" ng-model="confirm_password" ui-validate=" '$value==password' " ui-validate-watch=" 'password' " tabindex="0" aria-required="true" aria-invalid="true">
                <span ng-show="form.confirm_password.$error.validator" aria-hidden="true" class="ng-hide">Las Contraseñas no coinciden!</span>
              </div>
            </div>-->

            <div class="form-group">
              <label class="col-sm-3 control-label">Correo Electrónico</label>
              <div class="col-sm-9">
                <input class="form-control" type="email" name="emailAdmin"  placeholder="Ingrese el correo electrónico del administrador" ng-model='formUser.email' />
                </div>
            </div>


            <!-- SÓLO SI AGREGA NUEVO USER, SI ESTÁ EDITANDO NO SE MUESTRA -->
            <div class="form-group" ng-if="!formCompany._id">
              <div class="col-sm-9 col-sm-offset-3">
                <label>
                <input type="checkbox" name="sendMail" id="sendmail" checked="checked" ng-model="formUser.sendMail" />
                Enviar invitación por email 
              </label>
              </div>
            </div>

            <div class="line line-dashed b-b line-lg pull-in"></div>


            <div class="form-group">
              <div class="col-sm-9 col-sm-offset-3">
                <button type="submit" class="btn btn-lg btn-primary btn-block" ng-disabled='form.$invalid'>
                  <span ng-if="!processing && !formCompany._id">Crear Empresa</span>
                  <span ng-if="!processing && formCompany._id">Editar Empresa</span>
                  <span ng-if="processing" class="spinner"><span class="glyphicon glyphicon-repeat"></span></span>
                </button>
              </div>
            </div>



            </form>
          </div>
        </div>
      </div>
  </div>
</div>
